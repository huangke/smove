{"version":3,"sources":["BlockPool.js"],"names":["BlockPool","blockCache","createBlock","blockPrefab","game","newBlock","length","i","_isCached","block","cc","instantiate","getComponent","node","addChild","push","releaseBlock","cacheAllBlock","_isInit","hideAllBlock","hide","module","exports"],"mappings":";;;;;;AAAA,IAAIA,YAAY;;AAEZC,gBAAY,EAFA;;AAIZC,iBAAa,qBAASC,WAAT,EAAsBC,IAAtB,EAA4B;AACrC,YAAIC,WAAW,IAAf;AACA,YAAG,KAAKJ,UAAL,CAAgBK,MAAhB,GAAyB,CAA5B,EAA+B;AAC3B,iBAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,KAAKN,UAAL,CAAgBK,MAAnC,EAA2CC,GAA3C,EAAgD;AAC5C,oBAAG,KAAKN,UAAL,CAAgBM,CAAhB,EAAmBC,SAAnB,IAAgC,IAAnC,EAAyC;AACrC,yBAAKP,UAAL,CAAgBM,CAAhB,EAAmBC,SAAnB,GAA+B,KAA/B;AACAH,+BAAW,KAAKJ,UAAL,CAAgBM,CAAhB,CAAX;AACA;AACH;AACJ;AACJ;AACD,YAAG,CAACF,QAAJ,EAAc;AACV,gBAAII,QAAQC,GAAGC,WAAH,CAAeR,WAAf,CAAZ;AACAE,uBAAWI,MAAMG,YAAN,CAAmB,OAAnB,CAAX;AACAR,iBAAKS,IAAL,CAAUC,QAAV,CAAmBL,KAAnB;AACAJ,qBAASG,SAAT,GAAqB,KAArB;AACA,iBAAKP,UAAL,CAAgBc,IAAhB,CAAqBV,QAArB;AACH;AACD,eAAOA,QAAP;AACH,KAvBW;;AAyBZW,kBAAc,sBAAUP,KAAV,EAAiB;AAC3BA,cAAMD,SAAN,GAAkB,IAAlB;AACH,KA3BW;;AA6BZS,mBAAe,yBAAW;AACtB,aAAI,IAAIV,IAAI,CAAZ,EAAgBA,IAAI,KAAKN,UAAL,CAAgBK,MAApC,EAA4CC,GAA5C,EAAiD;AAC7C,iBAAKN,UAAL,CAAgBM,CAAhB,EAAmBC,SAAnB,GAA+B,IAA/B;AACA,iBAAKP,UAAL,CAAgBM,CAAhB,EAAmBW,OAAnB,GAA6B,KAA7B;AACA;AACH;AACJ,KAnCW;;AAqCZC,kBAAc,wBAAW;AACrB,aAAI,IAAIZ,IAAI,CAAZ,EAAgBA,IAAI,KAAKN,UAAL,CAAgBK,MAApC,EAA4CC,GAA5C,EAAiD;AAC7C,iBAAKN,UAAL,CAAgBM,CAAhB,EAAmBa,IAAnB;AACH;AACJ;AAzCW,CAAhB;;AA4CAC,OAAOC,OAAP,GAAiBtB,SAAjB","file":"BlockPool.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var BlockPool = {\n\n    blockCache: [],\n\n    createBlock: function(blockPrefab, game) {\n        var newBlock = null;\n        if(this.blockCache.length > 0) {\n            for(var i = 0; i < this.blockCache.length; i++) {\n                if(this.blockCache[i]._isCached == true) {\n                    this.blockCache[i]._isCached = false;\n                    newBlock = this.blockCache[i];\n                    break;\n                }\n            }\n        } \n        if(!newBlock) {\n            var block = cc.instantiate(blockPrefab);\n            newBlock = block.getComponent('block');\n            game.node.addChild(block);\n            newBlock._isCached = false;\n            this.blockCache.push(newBlock);\n        }\n        return newBlock;\n    },\n\n    releaseBlock: function (block) {\n        block._isCached = true;\n    },\n\n    cacheAllBlock: function() {\n        for(var i = 0 ; i < this.blockCache.length; i++) {\n            this.blockCache[i]._isCached = true;\n            this.blockCache[i]._isInit = false;\n            // this.blockCache[i].hide();\n        }\n    },\n\n    hideAllBlock: function() {\n        for(var i = 0 ; i < this.blockCache.length; i++) {\n            this.blockCache[i].hide();\n        }\n    }\n};\n\nmodule.exports = BlockPool;\n"]}