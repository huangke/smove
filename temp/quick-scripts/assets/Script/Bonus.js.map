{"version":3,"sources":["Bonus.js"],"names":["cc","Class","extends","Component","properties","_game","_bonusIndex","onLoad","player","_player","getComponent","playerX","offSetX","playerY","offSetY","posTab","i","_cellsTable","length","x","y","push","randomIndex","Math","round","rand","node","setPosition","p","seq","repeatForever","sequence","rotateTo","runAction","start","onCollect","addScore","createBonus","destroy"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO,IADC;AAERC,qBAAa;AAFL,KAHP;;AAQL;;AAEAC,UAVK,oBAUK;AACN,YAAIC,SAAS,KAAKH,KAAL,CAAWI,OAAX,CAAmBC,YAAnB,CAAgC,QAAhC,CAAb;AACA,YAAIC,UAAUH,OAAOI,OAArB;AACA,YAAIC,UAAUL,OAAOM,OAArB;AACA,YAAIC,SAAS,EAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKX,KAAL,CAAWY,WAAX,CAAuBC,MAA3C,EAAmDF,GAAnD,EAAwD;AACpD,gBAAI,KAAKX,KAAL,CAAWY,WAAX,CAAuBD,CAAvB,EAA0BG,CAA1B,IAA+BR,OAA/B,IAA0C,KAAKN,KAAL,CAAWY,WAAX,CAAuBD,CAAvB,EAA0BI,CAA1B,IAA+BP,OAA7E,EAAsF;AAClFE,uBAAOM,IAAP,CAAY,KAAKhB,KAAL,CAAWY,WAAX,CAAuBD,CAAvB,CAAZ;AACH;AACJ;AACD,YAAIM,cAAcC,KAAKC,KAAL,CAAWxB,GAAGyB,IAAH,EAAX,IAAwBV,OAAOG,MAAjD;AACA,aAAKZ,WAAL,GAAmBS,OAAOO,WAAP,CAAnB;AACA,aAAKI,IAAL,CAAUC,WAAV,CAAsB3B,GAAG4B,CAAH,CAAK,KAAK,KAAKtB,WAAL,CAAiBa,CAA3B,EAA8B,KAAK,KAAKb,WAAL,CAAiBc,CAApD,CAAtB;;AAEA,YAAIS,MAAM7B,GAAG8B,aAAH,CACN9B,GAAG+B,QAAH,CACI/B,GAAGgC,QAAH,CAAY,CAAZ,EAAe,GAAf,EAAoB,GAApB,CADJ,EAEIhC,GAAGgC,QAAH,CAAY,CAAZ,EAAe,GAAf,EAAoB,GAApB,CAFJ,CADM,CAAV;AAKA,aAAKN,IAAL,CAAUO,SAAV,CAAoBJ,GAApB;AACH,KA9BI;AAgCLK,SAhCK,mBAgCI,CACR,CAjCI;AAmCLC,aAnCK,uBAmCQ;AACT,YAAI3B,SAAS,KAAKH,KAAL,CAAWI,OAAX,CAAmBC,YAAnB,CAAgC,QAAhC,CAAb;AACA,YAAI,KAAKJ,WAAL,CAAiBa,CAAjB,IAAsBX,OAAOI,OAA7B,IACD,KAAKN,WAAL,CAAiBc,CAAjB,IAAsBZ,OAAOM,OADhC,EACyC;AACrC,iBAAKT,KAAL,CAAW+B,QAAX;AACA,iBAAK/B,KAAL,CAAWgC,WAAX;AACA,iBAAKX,IAAL,CAAUY,OAAV;AACH;AACJ;;AAED;;AA7CK,CAAT","file":"Bonus.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _game: null,\n        _bonusIndex: null\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var player = this._game._player.getComponent(\"player\");\n        var playerX = player.offSetX;\n        var playerY = player.offSetY;\n        var posTab = [];\n        for (var i = 0; i < this._game._cellsTable.length; i++) {\n            if (this._game._cellsTable[i].x != playerX && this._game._cellsTable[i].y != playerY) {\n                posTab.push(this._game._cellsTable[i]);\n            }\n        }\n        var randomIndex = Math.round(cc.rand()) % posTab.length;\n        this._bonusIndex = posTab[randomIndex];\n        this.node.setPosition(cc.p(80 * this._bonusIndex.x, 80 * this._bonusIndex.y));\n\n        var seq = cc.repeatForever(\n            cc.sequence(\n                cc.rotateTo(2, 180, 180),\n                cc.rotateTo(2, 360, 360)\n            ));\n        this.node.runAction(seq);\n    },\n\n    start () {\n    },\n\n    onCollect () {\n        var player = this._game._player.getComponent(\"player\");\n        if (this._bonusIndex.x == player.offSetX\n        && this._bonusIndex.y == player.offSetY) {\n            this._game.addScore();\n            this._game.createBonus();\n            this.node.destroy();\n        }\n    }\n\n    // update (dt) {},\n});\n"]}