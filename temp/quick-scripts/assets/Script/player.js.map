{"version":3,"sources":["player.js"],"names":["Direction","require","cc","Class","extends","Component","properties","moveSize","offSetX","offSetY","maxOffSet","minOffSet","_game","actionDuration","onLoad","setInputConstrol","start","stopAllActions","node","self","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","dir","left","KEY","right","up","down","changePos","_isStart","action","moveBy","runAction"],"mappings":"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","file":"player.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var Direction = require(\"direction\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        moveSize: 80,\n        offSetX: 0,\n        offSetY: 0,\n        maxOffSet: 1,\n        minOffSet: -1,\n        _game: null,\n        actionDuration: 0.1\n    },\n\n    onLoad: function() {\n        this.setInputConstrol();\n    },\n\n    start: function() {\n\n    },\n\n    stopAllActions: function() {\n        this.offSetX = 0;\n        this.offSetY = 0;\n        this.node.stopAllActions();\n    },\n    // update (dt) {},\n\n    setInputConstrol: function() {\n        var self = this;\n        cc.eventManager.addListener({\n            event: cc.EventListener.KEYBOARD,\n            onKeyPressed:function(keyCode, event){\n                var dir = Direction.left;\n                switch(keyCode) {\n                    case cc.KEY.left:\n                        dir = Direction.left;\n                        break;\n                    case cc.KEY.right:\n                        dir = Direction.right;\n                        break;\n                    case cc.KEY.up:\n                        dir = Direction.up;\n                        break;\n                    case cc.KEY.down:\n                        dir = Direction.down;\n                        break;\n                }\n                // self.changePos(dir);\n            },\n            // onKeyReleased: function(keyCode, event) {\n            //     switch(keyCode) {\n            //         case cc.KEY.a:\n            //             self.accLeft = false;\n            //             break;\n            //         case cc.KEY.d:\n            //             self.accRight = false;\n            //             break;\n            //     }\n            // }\n        },self.node);\n    },\n\n    changePos: function(dir) {\n        if(!this._game._isStart) {\n            return;\n        }\n        switch(dir) {\n            case Direction.left:\n                if(this.offSetX > this.minOffSet) {\n                    // this.node.x -= this.moveSize;\n                    var action = cc.moveBy(this.actionDuration, -this.moveSize, 0);\n                    this.node.runAction(action);\n                    this.offSetX--;\n                }\n                break;\n            case Direction.right:\n                if(this.offSetX < this.maxOffSet) {\n                    // this.node.x += this.moveSize;\n                    var action = cc.moveBy(this.actionDuration, this.moveSize, 0);\n                    this.node.runAction(action);\n                    this.offSetX++;\n                }\n                break;\n            case Direction.up:\n                if(this.offSetY < this.maxOffSet) {\n                    // this.node.y += this.moveSize;\n                    var action = cc.moveBy(this.actionDuration, 0, this.moveSize);\n                    this.node.runAction(action);\n                    this.offSetY++;\n                }\n                break;\n            case Direction.down:\n                if(this.offSetY > this.minOffSet) {\n                    // this.node.y -= this.moveSize;\n                    var action = cc.moveBy(this.actionDuration, 0, -this.moveSize);\n                    this.node.runAction(action);\n                    this.offSetY--;\n                }\n                break;\n        }\n    }\n});\n"]}