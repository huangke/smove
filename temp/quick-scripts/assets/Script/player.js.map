{"version":3,"sources":["player.js"],"names":["Direction","require","cc","Class","extends","Component","properties","moveSize","offSetX","offSetY","maxOffSet","minOffSet","_game","actionDuration","onLoad","setInputConstrol","reset","node","setPosition","p","stopAllActions","self","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","dir","left","KEY","right","up","down","changePos","_isStart","moveAction","moveX","moveY","action","moveBy","finished","callFunc","checkBonus","act","sequence","runAction"],"mappings":"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","file":"player.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var Direction = require(\"direction\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        moveSize: 80,\n        offSetX: 0,\n        offSetY: 0,\n        maxOffSet: 1,\n        minOffSet: -1,\n        _game: null,\n        actionDuration: 0.1\n    },\n\n    onLoad: function() {\n        this.setInputConstrol();\n    },\n\n    reset: function() {\n        this.offSetX = 0;\n        this.offSetY = 0;\n        this.node.setPosition(cc.p(0,0));\n    },\n\n    stopAllActions: function() {\n        this.offSetX = 0;\n        this.offSetY = 0;\n        this.node.stopAllActions();\n    },\n    // update (dt) {},\n\n    setInputConstrol: function() {\n        var self = this;\n        cc.eventManager.addListener({\n            event: cc.EventListener.KEYBOARD,\n            onKeyPressed:function(keyCode, event){\n                var dir = Direction.left;\n                switch(keyCode) {\n                    case cc.KEY.left:\n                        dir = Direction.left;\n                        break;\n                    case cc.KEY.right:\n                        dir = Direction.right;\n                        break;\n                    case cc.KEY.up:\n                        dir = Direction.up;\n                        break;\n                    case cc.KEY.down:\n                        dir = Direction.down;\n                        break;\n                }\n                self.changePos(dir);\n            },\n            // onKeyReleased: function(keyCode, event) {\n            //     switch(keyCode) {\n            //         case cc.KEY.a:\n            //             self.accLeft = false;\n            //             break;\n            //         case cc.KEY.d:\n            //             self.accRight = false;\n            //             break;\n            //     }\n            // }\n        },self.node);\n    },\n\n    changePos: function(dir) {\n        if(!this._game._isStart) {\n            return;\n        }\n        switch(dir) {\n            case Direction.left:\n                if(this.offSetX > this.minOffSet) {\n                    // this.node.x -= this.moveSize;\n                    this.moveAction(-this.moveSize, 0);\n                    this.offSetX--;\n                }\n                break;\n            case Direction.right:\n                if(this.offSetX < this.maxOffSet) {\n                    // this.node.x += this.moveSize;\n                    this.moveAction(this.moveSize, 0);\n                    this.offSetX++;\n                }\n                break;\n            case Direction.up:\n                if(this.offSetY < this.maxOffSet) {\n                    // this.node.y += this.moveSize;\n                    this.moveAction(0, this.moveSize);\n                    this.offSetY++;\n                }\n                break;\n            case Direction.down:\n                if(this.offSetY > this.minOffSet) {\n                    // this.node.y -= this.moveSize;\n                    this.moveAction(0, -this.moveSize);\n                    this.offSetY--;\n                }\n                break;\n        }\n    },\n\n    moveAction: function(moveX, moveY) {\n        var action = cc.moveBy(this.actionDuration, moveX, moveY);\n        var finished = cc.callFunc(function(){\n            this._game.checkBonus();\n        },this);\n        var act = cc.sequence(action, finished);\n        this.node.runAction(act);\n    }\n});\n"]}