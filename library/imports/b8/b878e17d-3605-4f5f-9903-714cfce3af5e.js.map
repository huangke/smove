{"version":3,"sources":["../../../../assets/Script/assets/Script/block.js"],"names":["Direction","require","BlockPool","cc","Class","extends","Component","properties","speed","dir","left","_isInit","_game","_isCached","create","pos","game","node","active","setPosition","update","dt","changePos","checkCollide","x","centerNode","winSize","width","releaseSelf","right","up","y","height","down","releaseBlock","hide","playPos","_player","getPosition","distance","pDistance","playerRadius","blockRadius","gameOver"],"mappings":"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","file":"block.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var Direction = require(\"direction\");\nvar BlockPool = require(\"BlockPool\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        speed: 1,\n        dir: Direction.left,\n        _isInit: false,\n        _game: null,\n        _isCached: false\n    },\n\n    create: function(pos,speed,dir,game) {\n        this.node.active = true;\n        this.node.setPosition(pos);\n        this.speed = speed;\n        this.dir = dir;\n        this._isInit = true;\n        this._game = game;\n    },\n\n    update: function(dt) {\n        if(!this._isInit) {\n            return;\n        }\n        this.changePos();\n        this.checkCollide();\n    },\n\n    changePos: function() {\n        switch(this.dir) {\n            case Direction.left:\n                this.node.x -= this.speed;\n                if(this.node.x < this._game.centerNode.x - cc.winSize.width/2 - 40) {\n                    this.releaseSelf();\n                }\n                break;\n            case Direction.right:\n                this.node.x += this.speed;\n                if(this.node.x > this._game.centerNode.x + cc.winSize.width/2 + 40) {\n                    this.releaseSelf();\n                }\n                break;\n            case Direction.up:\n                this.node.y += this.speed;\n                if(this.node.y > this._game.centerNode.y + cc.winSize.height/2 + 40) {\n                    this.releaseSelf();\n                }\n                break;\n            case Direction.down:\n                this.node.y -= this.speed;\n                if(this.node.y < this._game.centerNode.y - cc.winSize.height/2 - 40) {\n                    this.releaseSelf();\n                }\n                break;\n        }\n    },\n\n    releaseSelf: function() {\n        this.node.active = false;\n        BlockPool.releaseBlock(this);\n    },\n\n    hide: function() {\n        this.node.active = false;\n    },\n\n    checkCollide: function() {\n        var playPos = this._game._player.getPosition();\n        var distance = cc.pDistance(playPos, this.node.getPosition());\n        if(distance < (this._game.playerRadius + this._game.blockRadius) / 2) {\n            this._game.gameOver();\n        }\n    }\n});\n"]}